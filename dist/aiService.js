import{r,u as L,f as z,h as K,P as V,L as F,a as N,j as e,m as O,d as I,C as R,A as U,E as D,i as J,s as B,g as G}from"./storage.js";function T(){const o=r.useRef(!1);return L(()=>(o.current=!0,()=>{o.current=!1}),[]),o}function _(){const o=T(),[t,s]=r.useState(0),a=r.useCallback(()=>{o.current&&s(t+1)},[t]);return[r.useCallback(()=>z.postRender(a),[a]),t]}class W extends r.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const a=this.props.sizeRef.current;a.height=s.offsetHeight||0,a.width=s.offsetWidth||0,a.top=s.offsetTop,a.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function H({children:o,isPresent:t}){const s=r.useId(),a=r.useRef(null),d=r.useRef({width:0,height:0,top:0,left:0});return r.useInsertionEffect(()=>{const{width:n,height:i,top:c,left:b}=d.current;if(t||!a.current||!n||!i)return;a.current.dataset.motionPopId=s;const p=document.createElement("style");return document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${n}px !important;
            height: ${i}px !important;
            top: ${c}px !important;
            left: ${b}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[t]),r.createElement(W,{isPresent:t,childRef:a,sizeRef:d},r.cloneElement(o,{ref:a}))}const M=({children:o,initial:t,isPresent:s,onExitComplete:a,custom:d,presenceAffectsLayout:n,mode:i})=>{const c=K(Z),b=r.useId(),p=r.useMemo(()=>({id:b,initial:t,isPresent:s,custom:d,onExitComplete:m=>{c.set(m,!0);for(const f of c.values())if(!f)return;a&&a()},register:m=>(c.set(m,!1),()=>c.delete(m))}),n?void 0:[s]);return r.useMemo(()=>{c.forEach((m,f)=>c.set(f,!1))},[s]),r.useEffect(()=>{!s&&!c.size&&a&&a()},[s]),i==="popLayout"&&(o=r.createElement(H,{isPresent:s},o)),r.createElement(V.Provider,{value:p},o)};function Z(){return new Map}function X(o){return r.useEffect(()=>()=>o(),[])}const E=o=>o.key||"";function Q(o,t){o.forEach(s=>{const a=E(s);t.set(a,s)})}function Y(o){const t=[];return r.Children.forEach(o,s=>{r.isValidElement(s)&&t.push(s)}),t}const ee=({children:o,custom:t,initial:s=!0,onExitComplete:a,exitBeforeEnter:d,presenceAffectsLayout:n=!0,mode:i="sync"})=>{const c=r.useContext(F).forceRender||_()[0],b=T(),p=Y(o);let m=p;const f=r.useRef(new Map).current,C=r.useRef(m),v=r.useRef(new Map).current,k=r.useRef(!0);if(L(()=>{k.current=!1,Q(p,v),C.current=m}),X(()=>{k.current=!0,v.clear(),f.clear()}),k.current)return r.createElement(r.Fragment,null,m.map(h=>r.createElement(M,{key:E(h),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:n,mode:i},h)));m=[...m];const j=C.current.map(E),u=p.map(E),w=j.length;for(let h=0;h<w;h++){const g=j[h];u.indexOf(g)===-1&&!f.has(g)&&f.set(g,void 0)}return i==="wait"&&f.size&&(m=[]),f.forEach((h,g)=>{if(u.indexOf(g)!==-1)return;const S=v.get(g);if(!S)return;const y=j.indexOf(g);let l=h;if(!l){const x=()=>{f.delete(g);const A=Array.from(v.keys()).filter(P=>!u.includes(P));if(A.forEach(P=>v.delete(P)),C.current=p.filter(P=>{const $=E(P);return $===g||A.includes($)}),!f.size){if(b.current===!1)return;c(),a&&a()}};l=r.createElement(M,{key:E(S),isPresent:!1,onExitComplete:x,custom:t,presenceAffectsLayout:n,mode:i},S),f.set(g,l)}m.splice(y,0,l)}),m=m.map(h=>{const g=h.key;return f.has(g)?h:r.createElement(M,{key:E(h),isPresent:!0,presenceAffectsLayout:n,mode:i},h)}),r.createElement(r.Fragment,null,f.size?m:m.map(h=>r.cloneElement(h)))},se=N("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),te=N("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ae=N("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ce=N("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),re=N("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),q=N("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),ne=N("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),de=N("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ue=N("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),xe=N("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),oe=N("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),me=({onComplete:o})=>{const[t,s]=r.useState(0),[a,d]=r.useState(""),[n,i]=r.useState(""),[c,b]=r.useState(""),[p,m]=r.useState([]),[f,C]=r.useState(!1),[v,k]=r.useState(!1),j=["Bem-vindo","Escolha sua IA","Configure a chave","Escolha o modelo","Teste a conexÃ£o","Pronto!"],u=()=>{t<j.length-1&&s(t+1)},w=()=>{t>0&&s(t-1)},h=async()=>{if(!(!n||!a)){k(!0);try{const y=await J(a,n);m(y),y.length>0&&!c&&b(y[0])}catch(y){console.error("Erro ao carregar modelos:",y);const l=I.find(x=>x.id===a);l&&(m(l.defaultModels),b(l.defaultModels[0]))}finally{k(!1)}}},g=async()=>{C(!0);try{await new Promise(y=>setTimeout(y,2e3)),await B({selectedProvider:a,apiKey:n,selectedModel:c,isConfigured:!0,hasCompletedOnboarding:!0}),u()}catch{alert("Erro ao testar conexÃ£o. Verifique sua chave de API.")}finally{C(!1)}},S=()=>{var y;switch(t){case 0:return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ¤–"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Bem-vindo ao Assistente IA Web!"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Automatize tarefas repetitivas na web com inteligÃªncia artificial. Vou te ajudar a configurar tudo em poucos passos simples."}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"O que vocÃª pode fazer:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:'â€¢ "FaÃ§a uma postagem de bom dia no LinkedIn"'}),e.jsx("li",{children:'â€¢ "Consulte preÃ§os de passagem para SÃ£o Paulo"'}),e.jsx("li",{children:'â€¢ "Bata meu ponto no sistema da empresa"'}),e.jsx("li",{children:"â€¢ E muito mais!"})]})]})]});case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Escolha seu Provedor de IA"}),e.jsx("p",{className:"text-gray-600",children:"Selecione qual inteligÃªncia artificial vocÃª quer usar"})]}),e.jsx("div",{className:"space-y-3",children:I.map(x=>e.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${a===x.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>d(x.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-2xl",children:x.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:x.description}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:x.costInfo})]}),a===x.id&&e.jsx(R,{className:"w-5 h-5 text-blue-500"})]})},x.id))})]});case 2:const l=I.find(x=>x.id===a);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Configure sua Chave de API"}),e.jsxs("p",{className:"text-gray-600",children:["VocÃª precisa de uma chave para usar ",l==null?void 0:l.name]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(U,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-800",children:"Como obter sua chave:"}),e.jsxs("ol",{className:"text-sm text-yellow-700 mt-2 space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"Clique no link abaixo para abrir o site oficial"}),e.jsx("li",{children:"Crie uma conta ou faÃ§a login"}),e.jsx("li",{children:'Procure por "API Keys" ou "Chaves de API"'}),e.jsx("li",{children:"Crie uma nova chave e copie ela"}),e.jsx("li",{children:"Cole a chave no campo abaixo"})]})]})]})}),e.jsxs("a",{href:l==null?void 0:l.setupUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsxs("span",{children:["Abrir ",l==null?void 0:l.name]}),e.jsx(D,{className:"w-4 h-4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l==null?void 0:l.apiKeyLabel}),e.jsx("input",{type:"password",value:n,onChange:x=>i(x.target.value),placeholder:"Cole sua chave de API aqui...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Escolha o Modelo de IA"}),e.jsx("p",{className:"text-gray-600",children:"Selecione qual modelo vocÃª quer usar"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{onClick:h,disabled:!n||v,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Carregando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"Carregar Modelos"})]})})}),p.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Modelos DisponÃ­veis:"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:p.map(x=>e.jsx("div",{className:`p-3 border-2 rounded-lg cursor-pointer transition-all ${c===x?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>b(x),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-800",children:x}),c===x&&e.jsx(R,{className:"w-5 h-5 text-blue-500"})]})},x))})]}),p.length===0&&!v&&e.jsx("div",{className:"text-center text-gray-500",children:'Clique em "Carregar Modelos" para ver os modelos disponÃ­veis'})]});case 4:return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Vamos testar sua configuraÃ§Ã£o"}),e.jsx("p",{className:"text-gray-600",children:"Clique no botÃ£o abaixo para verificar se tudo estÃ¡ funcionando"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"ConfiguraÃ§Ã£o Atual:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Provedor:"})," ",(y=I.find(x=>x.id===a))==null?void 0:y.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Modelo:"})," ",c]}),e.jsxs("p",{children:[e.jsx("strong",{children:"API Key:"})," ",n?"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢":"NÃ£o configurada"]})]})]}),e.jsx("button",{onClick:g,disabled:f||!n||!c,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Testando conexÃ£o..."})]}):"Testar ConexÃ£o"})]});case 5:return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Tudo pronto!"}),e.jsx("p",{className:"text-gray-600",children:"Sua extensÃ£o estÃ¡ configurada e pronta para usar. Agora vocÃª pode automatizar suas tarefas web!"}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"PrÃ³ximos passos:"}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Clique no Ã­cone da extensÃ£o na barra do navegador"}),e.jsx("li",{children:'â€¢ Digite uma instruÃ§Ã£o como "Abra o Gmail"'}),e.jsx("li",{children:"â€¢ Veja a mÃ¡gica acontecer!"})]})]}),e.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"ComeÃ§ar a usar"})]});default:return null}};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:j.map((y,l)=>e.jsxs("div",{className:`flex items-center ${l<=t?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${l<=t?"bg-blue-600 text-white":"bg-gray-200 text-gray-400"}`,children:l+1}),l<j.length-1&&e.jsx("div",{className:`w-12 h-0.5 mx-2 ${l<t?"bg-blue-600":"bg-gray-200"}`})]},l))}),e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Passo ",t+1," de ",j.length,": ",j[t]]})]}),e.jsx(ee,{mode:"wait",children:e.jsx(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"min-h-[400px] flex flex-col justify-center",children:S()},t)}),t<j.length-1&&t!==4&&e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs("button",{onClick:w,disabled:t===0,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"Anterior"})]}),e.jsxs("button",{onClick:u,disabled:t===1&&!a||t===2&&!n||t===3&&!c,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{children:"PrÃ³ximo"}),e.jsx(te,{className:"w-4 h-4"})]})]})]})},he=({steps:o,onComplete:t,onCancel:s})=>{const[a,d]=r.useState(0),[n,i]=r.useState(!1),[c,b]=r.useState(!1),[p,m]=r.useState(new Set),f=async(u,w)=>{try{const[h]=await chrome.tabs.query({active:!0,currentWindow:!0});return await chrome.tabs.sendMessage(h.id,{type:"EXECUTE_STEP",step:u}),m(g=>new Set([...g,w])),await new Promise(g=>setTimeout(g,1e3)),!0}catch(h){return console.error("Erro ao executar passo:",h),!1}},C=async()=>{i(!0),b(!1);for(let u=a;u<o.length&&!c;u++)if(d(u),!await f(o[u],u)){i(!1),alert(`Erro ao executar o passo: ${o[u].description}`);return}i(!1),t()},v=()=>{b(!0),i(!1)},k=()=>{i(!1),b(!1),d(0),m(new Set),s()},j=u=>p.has(u)?e.jsx(R,{className:"w-5 h-5 text-green-500"}):u===a&&n?e.jsx(ae,{className:"w-5 h-5 text-blue-500 animate-pulse"}):e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Executando Tarefa"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[p.size," de ",o.length," passos concluÃ­dos"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${p.size/o.length*100}%`}})}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:o.map((u,w)=>e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:w*.1},className:`flex items-center space-x-3 p-3 rounded-lg ${w===a&&n?"bg-blue-50 border border-blue-200":p.has(w)?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[j(w),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:u.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:[u.action," ",u.target&&`â†’ ${u.target}`]})]})]},u.id))}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[!n&&!c&&e.jsxs("button",{onClick:C,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"Iniciar"})]}),n&&e.jsxs("button",{onClick:v,className:"flex items-center space-x-2 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Pausar"})]}),c&&e.jsxs("button",{onClick:C,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"Continuar"})]}),e.jsxs("button",{onClick:k,className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsx("span",{children:"Parar"})]})]})]})};class ie{async makeRequest(t){const s=await G();if(!s.isConfigured)throw new Error("IA nÃ£o configurada. Configure primeiro nas opÃ§Ãµes.");switch(s.selectedProvider){case"openai":return this.callOpenAI(t,s.apiKey,s.selectedModel);case"gemini":return this.callGemini(t,s.apiKey,s.selectedModel);case"ollama":return this.callOllama(t,s.apiKey,s.selectedModel);default:throw new Error("Provedor de IA nÃ£o suportado")}}async callOpenAI(t,s,a){const d=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({model:a||"gpt-3.5-turbo",messages:[{role:"system",content:'VocÃª Ã© um assistente que converte instruÃ§Ãµes em passos de automaÃ§Ã£o web. Responda sempre em JSON com formato: {"steps": [{"action": "navigate|click|type|wait", "target": "seletor ou URL", "value": "texto se necessÃ¡rio", "description": "descriÃ§Ã£o do passo"}], "explanation": "explicaÃ§Ã£o do que serÃ¡ feito", "warnings": ["avisos se houver"]}'},{role:"user",content:t}],temperature:.3})});if(!d.ok){const i=await d.text();throw new Error(`Erro na API OpenAI: ${d.status} - ${i}`)}return(await d.json()).choices[0].message.content}async callGemini(t,s,a){const n=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${a||"gemini-pro"}:generateContent?key=${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`VocÃª Ã© um assistente que converte instruÃ§Ãµes em passos de automaÃ§Ã£o web. Responda sempre em JSON com formato: {"steps": [{"action": "navigate|click|type|wait", "target": "seletor ou URL", "value": "texto se necessÃ¡rio", "description": "descriÃ§Ã£o do passo"}], "explanation": "explicaÃ§Ã£o do que serÃ¡ feito", "warnings": ["avisos se houver"]}

InstruÃ§Ã£o: ${t}`}]}],generationConfig:{temperature:.3,topK:1,topP:1,maxOutputTokens:2048}})});if(!n.ok){const c=await n.text();throw new Error(`Erro na API Gemini: ${n.status} - ${c}`)}const i=await n.json();if(!i.candidates||!i.candidates[0]||!i.candidates[0].content)throw new Error("Resposta invÃ¡lida da API Gemini");return i.candidates[0].content.parts[0].text}async callOllama(t,s,a){const d=await fetch(`${s}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:a||"llama2",prompt:`VocÃª Ã© um assistente que converte instruÃ§Ãµes em passos de automaÃ§Ã£o web. Responda sempre em JSON com formato: {"steps": [{"action": "navigate|click|type|wait", "target": "seletor ou URL", "value": "texto se necessÃ¡rio", "description": "descriÃ§Ã£o do passo"}], "explanation": "explicaÃ§Ã£o do que serÃ¡ feito", "warnings": ["avisos se houver"]}

InstruÃ§Ã£o: ${t}`,stream:!1})});if(!d.ok){const i=await d.text();throw new Error(`Erro no Ollama: ${d.status} - ${i}`)}return(await d.json()).response}async processInstruction(t){try{const s=await this.makeRequest(t);let a=s;const d=s.match(/\{[\s\S]*\}/);d&&(a=d[0]);const n=JSON.parse(a);return{steps:n.steps.map((i,c)=>({id:`step-${c}`,description:i.description,action:i.action,target:i.target,value:i.value,completed:!1})),explanation:n.explanation,warnings:n.warnings||[]}}catch(s){throw console.error("Erro ao processar instruÃ§Ã£o:",s),new Error(`NÃ£o foi possÃ­vel processar a instruÃ§Ã£o: ${s.message}`)}}}const pe=new ie;export{ee as A,ce as L,me as O,xe as S,he as T,ue as a,de as b,pe as c};
