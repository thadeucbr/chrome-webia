import{c as N,j as e,r as t,g as v,A as w,m as p}from"./storage.js";import{O as C,A as S,T as k,S as E,a as I,L as A,b as O,c as q}from"./aiService.js";const T=()=>{const[a,h]=t.useState(null),[r,n]=t.useState(""),[o,l]=t.useState(!1),[c,i]=t.useState(null),[b,u]=t.useState(!1);t.useEffect(()=>{d()},[]);const d=async()=>{try{const s=await v();h(s),s.hasCompletedOnboarding||u(!0)}catch(s){console.error("Erro ao carregar configura√ß√µes:",s)}},m=async()=>{if(!(!r.trim()||o)){l(!0);try{const s=await q.processInstruction(r);i(s),n("")}catch{alert("Erro ao processar instru√ß√£o. Verifique sua configura√ß√£o.")}finally{l(!1)}}},f=()=>{i(null)},j=()=>{i(null)},x=()=>{chrome.runtime.openOptionsPage()};return b?e.jsx(C,{onComplete:()=>{u(!1),d()}}):a!=null&&a.isConfigured?e.jsx("div",{className:"w-full h-full bg-white",children:e.jsx(S,{mode:"wait",children:c?e.jsx(p.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"p-4",children:e.jsx(k,{steps:c.steps,onComplete:f,onCancel:j})},"task-executor"):e.jsxs(p.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"w-6 h-6 text-blue-600"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Assistente IA"})]}),e.jsx("button",{onClick:x,className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(I,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Exemplos r√°pidos:"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:["Abra o Gmail e verifique novos emails","Fa√ßa uma postagem no LinkedIn","Consulte o clima para hoje"].map((s,y)=>e.jsx("button",{onClick:()=>n(s),className:"text-left text-xs text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 p-2 rounded transition-colors",children:s},y))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"O que voc√™ quer que eu fa√ßa?"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:r,onChange:s=>n(s.target.value),placeholder:"Ex: Fa√ßa uma postagem de bom dia no meu LinkedIn",className:"w-full p-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3,onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),m())}}),e.jsx("button",{onClick:m,disabled:!r.trim()||o,className:"absolute bottom-2 right-2 p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?e.jsx(A,{className:"w-4 h-4 animate-spin"}):e.jsx(O,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800 mb-2",children:"üí° Dicas:"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Seja espec√≠fico sobre o que quer fazer"}),e.jsx("li",{children:'‚Ä¢ Mencione o site se necess√°rio (ex: "no LinkedIn")'}),e.jsx("li",{children:"‚Ä¢ Use linguagem natural e simples"})]})]})]},"main-interface")})}):e.jsxs("div",{className:"p-6 text-center space-y-4",children:[e.jsx(w,{className:"w-12 h-12 text-yellow-500 mx-auto"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Configura√ß√£o Necess√°ria"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure sua IA antes de usar a extens√£o"}),e.jsx("button",{onClick:x,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Abrir Configura√ß√µes"})]})},g=document.getElementById("popup-root");g&&N(g).render(e.jsx(T,{}));
