import{r as n,u as T,f as U,a as B,P as J,L as D,c as v,j as e,m as E,A as R,b as L,E as G,C as $,s as _,g as z,d as W}from"./storage.js";function M(){const o=n.useRef(!1);return T(()=>(o.current=!0,()=>{o.current=!1}),[]),o}function Z(){const o=M(),[t,a]=n.useState(0),s=n.useCallback(()=>{o.current&&a(t+1)},[t]);return[n.useCallback(()=>U.postRender(s),[s]),t]}class H extends n.Component{getSnapshotBeforeUpdate(t){const a=this.props.childRef.current;if(a&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=a.offsetHeight||0,s.width=a.offsetWidth||0,s.top=a.offsetTop,s.left=a.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function X({children:o,isPresent:t}){const a=n.useId(),s=n.useRef(null),d=n.useRef({width:0,height:0,top:0,left:0});return n.useInsertionEffect(()=>{const{width:u,height:p,top:m,left:y}=d.current;if(t||!s.current||!u||!p)return;s.current.dataset.motionPopId=a;const i=document.createElement("style");return document.head.appendChild(i),i.sheet&&i.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${p}px !important;
            top: ${m}px !important;
            left: ${y}px !important;
          }
        `),()=>{document.head.removeChild(i)}},[t]),n.createElement(H,{isPresent:t,childRef:s,sizeRef:d},n.cloneElement(o,{ref:s}))}const I=({children:o,initial:t,isPresent:a,onExitComplete:s,custom:d,presenceAffectsLayout:u,mode:p})=>{const m=B(Q),y=n.useId(),i=n.useMemo(()=>({id:y,initial:t,isPresent:a,custom:d,onExitComplete:l=>{m.set(l,!0);for(const h of m.values())if(!h)return;s&&s()},register:l=>(m.set(l,!1),()=>m.delete(l))}),u?void 0:[a]);return n.useMemo(()=>{m.forEach((l,h)=>m.set(h,!1))},[a]),n.useEffect(()=>{!a&&!m.size&&s&&s()},[a]),p==="popLayout"&&(o=n.createElement(X,{isPresent:a},o)),n.createElement(J.Provider,{value:i},o)};function Q(){return new Map}function Y(o){return n.useEffect(()=>()=>o(),[])}const N=o=>o.key||"";function ee(o,t){o.forEach(a=>{const s=N(a);t.set(s,a)})}function se(o){const t=[];return n.Children.forEach(o,a=>{n.isValidElement(a)&&t.push(a)}),t}const K=({children:o,custom:t,initial:a=!0,onExitComplete:s,exitBeforeEnter:d,presenceAffectsLayout:u=!0,mode:p="sync"})=>{const m=n.useContext(D).forceRender||Z()[0],y=M(),i=se(o);let l=i;const h=n.useRef(new Map).current,j=n.useRef(l),b=n.useRef(new Map).current,c=n.useRef(!0);if(T(()=>{c.current=!1,ee(i,b),j.current=l}),Y(()=>{c.current=!0,b.clear(),h.clear()}),c.current)return n.createElement(n.Fragment,null,l.map(f=>n.createElement(I,{key:N(f),isPresent:!0,initial:a?void 0:!1,presenceAffectsLayout:u,mode:p},f)));l=[...l];const r=j.current.map(N),x=i.map(N),w=r.length;for(let f=0;f<w;f++){const g=r[f];x.indexOf(g)===-1&&!h.has(g)&&h.set(g,void 0)}return p==="wait"&&h.size&&(l=[]),h.forEach((f,g)=>{if(x.indexOf(g)!==-1)return;const S=b.get(g);if(!S)return;const V=r.indexOf(g);let k=f;if(!k){const F=()=>{h.delete(g);const P=Array.from(b.keys()).filter(C=>!x.includes(C));if(P.forEach(C=>b.delete(C)),j.current=i.filter(C=>{const A=N(C);return A===g||P.includes(A)}),!h.size){if(y.current===!1)return;m(),s&&s()}};k=n.createElement(I,{key:N(S),isPresent:!1,onExitComplete:F,custom:t,presenceAffectsLayout:u,mode:p},S),h.set(g,k)}l.splice(V,0,k)}),l=l.map(f=>{const g=f.key;return h.has(g)?f:n.createElement(I,{key:N(f),isPresent:!0,presenceAffectsLayout:u,mode:p},f)}),n.createElement(n.Fragment,null,h.size?l:l.map(f=>n.cloneElement(f)))},te=v("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ae=v("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ne=v("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),re=v("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),oe=v("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),q=v("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),ie=v("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),le=v("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ce=v("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),de=v("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),ue=({onComplete:o})=>{const[t,a]=n.useState(0),[s,d]=n.useState(""),[u,p]=n.useState(""),[m,y]=n.useState(!1),i=["Bem-vindo","Escolha sua IA","Configure a chave","Teste a conexÃ£o","Pronto!"],l=()=>{t<i.length-1&&a(t+1)},h=()=>{t>0&&a(t-1)},j=async()=>{y(!0);try{await new Promise(c=>setTimeout(c,2e3)),await _({selectedProvider:s,apiKey:u,isConfigured:!0,hasCompletedOnboarding:!0}),l()}catch{alert("Erro ao testar conexÃ£o. Verifique sua chave de API.")}finally{y(!1)}},b=()=>{switch(t){case 0:return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ¤–"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Bem-vindo ao Assistente IA Web!"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Automatize tarefas repetitivas na web com inteligÃªncia artificial. Vou te ajudar a configurar tudo em poucos passos simples."}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"O que vocÃª pode fazer:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:'â€¢ "FaÃ§a uma postagem de bom dia no LinkedIn"'}),e.jsx("li",{children:'â€¢ "Consulte preÃ§os de passagem para SÃ£o Paulo"'}),e.jsx("li",{children:'â€¢ "Bata meu ponto no sistema da empresa"'}),e.jsx("li",{children:"â€¢ E muito mais!"})]})]})]});case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Escolha seu Provedor de IA"}),e.jsx("p",{className:"text-gray-600",children:"Selecione qual inteligÃªncia artificial vocÃª quer usar"})]}),e.jsx("div",{className:"space-y-3",children:R.map(r=>e.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${s===r.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>d(r.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-2xl",children:r.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:r.description}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:r.costInfo})]}),s===r.id&&e.jsx($,{className:"w-5 h-5 text-blue-500"})]})},r.id))})]});case 2:const c=R.find(r=>r.id===s);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Configure sua Chave de API"}),e.jsxs("p",{className:"text-gray-600",children:["VocÃª precisa de uma chave para usar ",c==null?void 0:c.name]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(L,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-800",children:"Como obter sua chave:"}),e.jsxs("ol",{className:"text-sm text-yellow-700 mt-2 space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"Clique no link abaixo para abrir o site oficial"}),e.jsx("li",{children:"Crie uma conta ou faÃ§a login"}),e.jsx("li",{children:'Procure por "API Keys" ou "Chaves de API"'}),e.jsx("li",{children:"Crie uma nova chave e copie ela"}),e.jsx("li",{children:"Cole a chave no campo abaixo"})]})]})]})}),e.jsxs("a",{href:c==null?void 0:c.setupUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsxs("span",{children:["Abrir ",c==null?void 0:c.name]}),e.jsx(G,{className:"w-4 h-4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:c==null?void 0:c.apiKeyLabel}),e.jsx("input",{type:"password",value:u,onChange:r=>p(r.target.value),placeholder:"Cole sua chave de API aqui...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]});case 3:return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Vamos testar sua configuraÃ§Ã£o"}),e.jsx("p",{className:"text-gray-600",children:"Clique no botÃ£o abaixo para verificar se tudo estÃ¡ funcionando"}),e.jsx("button",{onClick:j,disabled:m||!u,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Testando conexÃ£o..."})]}):"Testar ConexÃ£o"})]});case 4:return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Tudo pronto!"}),e.jsx("p",{className:"text-gray-600",children:"Sua extensÃ£o estÃ¡ configurada e pronta para usar. Agora vocÃª pode automatizar suas tarefas web!"}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"PrÃ³ximos passos:"}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Clique no Ã­cone da extensÃ£o na barra do navegador"}),e.jsx("li",{children:'â€¢ Digite uma instruÃ§Ã£o como "Abra o Gmail"'}),e.jsx("li",{children:"â€¢ Veja a mÃ¡gica acontecer!"})]})]}),e.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"ComeÃ§ar a usar"})]});default:return null}};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:i.map((c,r)=>e.jsxs("div",{className:`flex items-center ${r<=t?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${r<=t?"bg-blue-600 text-white":"bg-gray-200 text-gray-400"}`,children:r+1}),r<i.length-1&&e.jsx("div",{className:`w-12 h-0.5 mx-2 ${r<t?"bg-blue-600":"bg-gray-200"}`})]},r))}),e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Passo ",t+1," de ",i.length,": ",i[t]]})]}),e.jsx(K,{mode:"wait",children:e.jsx(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"min-h-[400px] flex flex-col justify-center",children:b()},t)}),t<i.length-1&&t!==3&&e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs("button",{onClick:h,disabled:t===0,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Anterior"})]}),e.jsxs("button",{onClick:l,disabled:t===1&&!s||t===2&&!u,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{children:"PrÃ³ximo"}),e.jsx(ae,{className:"w-4 h-4"})]})]})]})},xe=({steps:o,onComplete:t,onCancel:a})=>{const[s,d]=n.useState(0),[u,p]=n.useState(!1),[m,y]=n.useState(!1),[i,l]=n.useState(new Set),h=async(x,w)=>{try{const[f]=await chrome.tabs.query({active:!0,currentWindow:!0});return await chrome.tabs.sendMessage(f.id,{type:"EXECUTE_STEP",step:x}),l(g=>new Set([...g,w])),await new Promise(g=>setTimeout(g,1e3)),!0}catch(f){return console.error("Erro ao executar passo:",f),!1}},j=async()=>{p(!0),y(!1);for(let x=s;x<o.length&&!m;x++)if(d(x),!await h(o[x],x)){p(!1),alert(`Erro ao executar o passo: ${o[x].description}`);return}p(!1),t()},b=()=>{y(!0),p(!1)},c=()=>{p(!1),y(!1),d(0),l(new Set),a()},r=x=>i.has(x)?e.jsx($,{className:"w-5 h-5 text-green-500"}):x===s&&u?e.jsx(ne,{className:"w-5 h-5 text-blue-500 animate-pulse"}):e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Executando Tarefa"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[i.size," de ",o.length," passos concluÃ­dos"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${i.size/o.length*100}%`}})}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:o.map((x,w)=>e.jsxs(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:w*.1},className:`flex items-center space-x-3 p-3 rounded-lg ${w===s&&u?"bg-blue-50 border border-blue-200":i.has(w)?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[r(w),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:x.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:[x.action," ",x.target&&`â†’ ${x.target}`]})]})]},x.id))}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[!u&&!m&&e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"Iniciar"})]}),u&&e.jsxs("button",{onClick:b,className:"flex items-center space-x-2 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors",children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsx("span",{children:"Pausar"})]}),m&&e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"Continuar"})]}),e.jsxs("button",{onClick:c,className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{children:"Parar"})]})]})]})};class me{async makeRequest(t){const a=await z();if(!a.isConfigured)throw new Error("IA nÃ£o configurada. Configure primeiro nas opÃ§Ãµes.");switch(a.selectedProvider){case"openai":return this.callOpenAI(t,a.apiKey);case"gemini":return this.callGemini(t,a.apiKey);case"ollama":return this.callOllama(t,a.apiKey);default:throw new Error("Provedor de IA nÃ£o suportado")}}async callOpenAI(t,a){const s=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:'VocÃª Ã© um assistente que converte instruÃ§Ãµes em passos de automaÃ§Ã£o web. Responda sempre em JSON com formato: {"steps": [{"action": "navigate|click|type|wait", "target": "seletor ou URL", "value": "texto se necessÃ¡rio", "description": "descriÃ§Ã£o do passo"}], "explanation": "explicaÃ§Ã£o do que serÃ¡ feito", "warnings": ["avisos se houver"]}'},{role:"user",content:t}],temperature:.3})});if(!s.ok)throw new Error(`Erro na API OpenAI: ${s.statusText}`);return(await s.json()).choices[0].message.content}async callGemini(t,a){const s=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`VocÃª Ã© um assistente que converte instruÃ§Ãµes em passos de automaÃ§Ã£o web. Responda sempre em JSON com formato: {"steps": [{"action": "navigate|click|type|wait", "target": "seletor ou URL", "value": "texto se necessÃ¡rio", "description": "descriÃ§Ã£o do passo"}], "explanation": "explicaÃ§Ã£o do que serÃ¡ feito", "warnings": ["avisos se houver"]}

InstruÃ§Ã£o: ${t}`}]}]})});if(!s.ok)throw new Error(`Erro na API Gemini: ${s.statusText}`);return(await s.json()).candidates[0].content.parts[0].text}async callOllama(t,a){const s=await fetch(`${a}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"llama2",prompt:`VocÃª Ã© um assistente que converte instruÃ§Ãµes em passos de automaÃ§Ã£o web. Responda sempre em JSON com formato: {"steps": [{"action": "navigate|click|type|wait", "target": "seletor ou URL", "value": "texto se necessÃ¡rio", "description": "descriÃ§Ã£o do passo"}], "explanation": "explicaÃ§Ã£o do que serÃ¡ feito", "warnings": ["avisos se houver"]}

InstruÃ§Ã£o: ${t}`,stream:!1})});if(!s.ok)throw new Error(`Erro no Ollama: ${s.statusText}`);return(await s.json()).response}async processInstruction(t){try{const a=await this.makeRequest(t),s=JSON.parse(a);return{steps:s.steps.map((d,u)=>({id:`step-${u}`,description:d.description,action:d.action,target:d.target,value:d.value,completed:!1})),explanation:s.explanation,warnings:s.warnings||[]}}catch(a){throw console.error("Erro ao processar instruÃ§Ã£o:",a),new Error("NÃ£o foi possÃ­vel processar a instruÃ§Ã£o. Verifique sua configuraÃ§Ã£o de IA.")}}}const he=new me,pe=()=>{const[o,t]=n.useState(null),[a,s]=n.useState(""),[d,u]=n.useState(!1),[p,m]=n.useState(null),[y,i]=n.useState(!1);n.useEffect(()=>{l()},[]);const l=async()=>{try{const r=await z();t(r),r.hasCompletedOnboarding||i(!0)}catch(r){console.error("Erro ao carregar configuraÃ§Ãµes:",r)}},h=async()=>{if(!(!a.trim()||d)){u(!0);try{const r=await he.processInstruction(a);m(r),s("")}catch{alert("Erro ao processar instruÃ§Ã£o. Verifique sua configuraÃ§Ã£o.")}finally{u(!1)}}},j=()=>{m(null)},b=()=>{m(null)},c=()=>{chrome.runtime.openOptionsPage()};return y?e.jsx(ue,{onComplete:()=>{i(!1),l()}}):o!=null&&o.isConfigured?e.jsx("div",{className:"w-full h-full bg-white",children:e.jsx(K,{mode:"wait",children:p?e.jsx(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"p-4",children:e.jsx(xe,{steps:p.steps,onComplete:j,onCancel:b})},"task-executor"):e.jsxs(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"w-6 h-6 text-blue-600"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Assistente IA"})]}),e.jsx("button",{onClick:c,className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Exemplos rÃ¡pidos:"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:["Abra o Gmail e verifique novos emails","FaÃ§a uma postagem no LinkedIn","Consulte o clima para hoje"].map((r,x)=>e.jsx("button",{onClick:()=>s(r),className:"text-left text-xs text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 p-2 rounded transition-colors",children:r},x))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"O que vocÃª quer que eu faÃ§a?"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:a,onChange:r=>s(r.target.value),placeholder:"Ex: FaÃ§a uma postagem de bom dia no meu LinkedIn",className:"w-full p-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3,onKeyDown:r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),h())}}),e.jsx("button",{onClick:h,disabled:!a.trim()||d,className:"absolute bottom-2 right-2 p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?e.jsx(re,{className:"w-4 h-4 animate-spin"}):e.jsx(ie,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800 mb-2",children:"ðŸ’¡ Dicas:"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Seja especÃ­fico sobre o que quer fazer"}),e.jsx("li",{children:'â€¢ Mencione o site se necessÃ¡rio (ex: "no LinkedIn")'}),e.jsx("li",{children:"â€¢ Use linguagem natural e simples"})]})]})]},"main-interface")})}):e.jsxs("div",{className:"p-6 text-center space-y-4",children:[e.jsx(L,{className:"w-12 h-12 text-yellow-500 mx-auto"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"ConfiguraÃ§Ã£o NecessÃ¡ria"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure sua IA antes de usar a extensÃ£o"}),e.jsx("button",{onClick:c,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Abrir ConfiguraÃ§Ãµes"})]})},O=document.getElementById("popup-root");O&&W(O).render(e.jsx(pe,{}));
