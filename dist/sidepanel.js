import{r as a,u as T,f as U,a as G,P as B,L as J,c as N,j as e,m as I,A as P,C as R,b as z,E as K,g as _,s as H,d as V,e as W}from"./storage.js";function F(){const n=a.useRef(!1);return T(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function Z(){const n=F(),[t,s]=a.useState(0),r=a.useCallback(()=>{n.current&&s(t+1)},[t]);return[a.useCallback(()=>U.postRender(r),[r]),t]}class X extends a.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=s.offsetHeight||0,r.width=s.offsetWidth||0,r.top=s.offsetTop,r.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Y({children:n,isPresent:t}){const s=a.useId(),r=a.useRef(null),d=a.useRef({width:0,height:0,top:0,left:0});return a.useInsertionEffect(()=>{const{width:o,height:i,top:c,left:b}=d.current;if(t||!r.current||!o||!i)return;r.current.dataset.motionPopId=s;const h=document.createElement("style");return document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${i}px !important;
            top: ${c}px !important;
            left: ${b}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[t]),a.createElement(X,{isPresent:t,childRef:r,sizeRef:d},a.cloneElement(n,{ref:r}))}const A=({children:n,initial:t,isPresent:s,onExitComplete:r,custom:d,presenceAffectsLayout:o,mode:i})=>{const c=G(Q),b=a.useId(),h=a.useMemo(()=>({id:b,initial:t,isPresent:s,custom:d,onExitComplete:u=>{c.set(u,!0);for(const p of c.values())if(!p)return;r&&r()},register:u=>(c.set(u,!1),()=>c.delete(u))}),o?void 0:[s]);return a.useMemo(()=>{c.forEach((u,p)=>c.set(p,!1))},[s]),a.useEffect(()=>{!s&&!c.size&&r&&r()},[s]),i==="popLayout"&&(n=a.createElement(Y,{isPresent:s},n)),a.createElement(B.Provider,{value:h},n)};function Q(){return new Map}function ee(n){return a.useEffect(()=>()=>n(),[])}const k=n=>n.key||"";function se(n,t){n.forEach(s=>{const r=k(s);t.set(r,s)})}function te(n){const t=[];return a.Children.forEach(n,s=>{a.isValidElement(s)&&t.push(s)}),t}const D=({children:n,custom:t,initial:s=!0,onExitComplete:r,exitBeforeEnter:d,presenceAffectsLayout:o=!0,mode:i="sync"})=>{const c=a.useContext(J).forceRender||Z()[0],b=F(),h=te(n);let u=h;const p=a.useRef(new Map).current,w=a.useRef(u),j=a.useRef(new Map).current,v=a.useRef(!0);if(T(()=>{v.current=!1,se(h,j),w.current=u}),ee(()=>{v.current=!0,j.clear(),p.clear()}),v.current)return a.createElement(a.Fragment,null,u.map(f=>a.createElement(A,{key:k(f),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:o,mode:i},f)));u=[...u];const x=w.current.map(k),m=h.map(k),C=x.length;for(let f=0;f<C;f++){const g=x[f];m.indexOf(g)===-1&&!p.has(g)&&p.set(g,void 0)}return i==="wait"&&p.size&&(u=[]),p.forEach((f,g)=>{if(m.indexOf(g)!==-1)return;const S=j.get(g);if(!S)return;const y=x.indexOf(g);let l=f;if(!l){const M=()=>{p.delete(g);const q=Array.from(j.keys()).filter(E=>!m.includes(E));if(q.forEach(E=>j.delete(E)),w.current=h.filter(E=>{const L=k(E);return L===g||q.includes(L)}),!p.size){if(b.current===!1)return;c(),r&&r()}};l=a.createElement(A,{key:k(S),isPresent:!1,onExitComplete:M,custom:t,presenceAffectsLayout:o,mode:i},S),p.set(g,l)}u.splice(y,0,l)}),u=u.map(f=>{const g=f.key;return p.has(g)?f:a.createElement(A,{key:k(f),isPresent:!0,presenceAffectsLayout:o,mode:i},f)}),a.createElement(a.Fragment,null,p.size?u:u.map(f=>a.cloneElement(f)))},ae=N("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),re=N("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ne=N("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),oe=N("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),le=N("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),ie=N("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),O=N("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),ce=N("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),de=N("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),xe=N("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ue=N("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),me=N("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),he=({onComplete:n})=>{const[t,s]=a.useState(0),[r,d]=a.useState(""),[o,i]=a.useState(""),[c,b]=a.useState(""),[h,u]=a.useState([]),[p,w]=a.useState(!1),[j,v]=a.useState(!1),x=["Bem-vindo","Escolha sua IA","Configure a chave","Escolha o modelo","Teste a conexÃ£o","Pronto!"],m=()=>{t<x.length-1&&s(t+1)},C=()=>{t>0&&s(t-1)},f=async()=>{if(!(!o||!r)){v(!0);try{const y=await _(r,o);u(y),y.length>0&&!c&&b(y[0])}catch(y){console.error("Erro ao carregar modelos:",y);const l=P.find(M=>M.id===r);l&&(u(l.defaultModels),b(l.defaultModels[0]))}finally{v(!1)}}},g=async()=>{w(!0);try{await new Promise(y=>setTimeout(y,2e3)),await H({selectedProvider:r,apiKey:o,selectedModel:c,isConfigured:!0,hasCompletedOnboarding:!0}),m()}catch{alert("Erro ao testar conexÃ£o. Verifique sua chave de API.")}finally{w(!1)}},S=()=>{switch(t){case 0:return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ¤–"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Bem-vindo ao Assistente IA Web!"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Automatize tarefas repetitivas na web com inteligÃªncia artificial. Vou te ajudar a configurar tudo em poucos passos simples."}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"O que vocÃª pode fazer:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:'â€¢ "FaÃ§a uma postagem de bom dia no LinkedIn"'}),e.jsx("li",{children:'â€¢ "Consulte preÃ§os de passagem para SÃ£o Paulo"'}),e.jsx("li",{children:'â€¢ "Bata meu ponto no sistema da empresa"'}),e.jsx("li",{children:"â€¢ E muito mais!"})]})]})]});case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Escolha seu Provedor de IA"}),e.jsx("p",{className:"text-gray-600",children:"Selecione qual inteligÃªncia artificial vocÃª quer usar"})]}),e.jsx("div",{className:"space-y-3",children:P.map(l=>e.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${r===l.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>d(l.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-2xl",children:l.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:l.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:l.description}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:l.costInfo})]}),r===l.id&&e.jsx(R,{className:"w-5 h-5 text-blue-500"})]})},l.id))})]});case 2:const y=P.find(l=>l.id===r);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Configure sua Chave de API"}),e.jsxs("p",{className:"text-gray-600",children:["VocÃª precisa de uma chave para usar ",y?.name]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(z,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-800",children:"Como obter sua chave:"}),e.jsxs("ol",{className:"text-sm text-yellow-700 mt-2 space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"Clique no link abaixo para abrir o site oficial"}),e.jsx("li",{children:"Crie uma conta ou faÃ§a login"}),e.jsx("li",{children:'Procure por "API Keys" ou "Chaves de API"'}),e.jsx("li",{children:"Crie uma nova chave e copie ela"}),e.jsx("li",{children:"Cole a chave no campo abaixo"})]})]})]})}),e.jsxs("a",{href:y?.setupUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsxs("span",{children:["Abrir ",y?.name]}),e.jsx(K,{className:"w-4 h-4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:y?.apiKeyLabel}),e.jsx("input",{type:"password",value:o,onChange:l=>i(l.target.value),placeholder:"Cole sua chave de API aqui...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Escolha o Modelo de IA"}),e.jsx("p",{className:"text-gray-600",children:"Selecione qual modelo vocÃª quer usar"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{onClick:f,disabled:!o||j,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Carregando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:"Carregar Modelos"})]})})}),h.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Modelos DisponÃ­veis:"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:h.map(l=>e.jsx("div",{className:`p-3 border-2 rounded-lg cursor-pointer transition-all ${c===l?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>b(l),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-800",children:l}),c===l&&e.jsx(R,{className:"w-5 h-5 text-blue-500"})]})},l))})]}),h.length===0&&!j&&e.jsx("div",{className:"text-center text-gray-500",children:'Clique em "Carregar Modelos" para ver os modelos disponÃ­veis'})]});case 4:return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Vamos testar sua configuraÃ§Ã£o"}),e.jsx("p",{className:"text-gray-600",children:"Clique no botÃ£o abaixo para verificar se tudo estÃ¡ funcionando"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"ConfiguraÃ§Ã£o Atual:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Provedor:"})," ",P.find(l=>l.id===r)?.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Modelo:"})," ",c]}),e.jsxs("p",{children:[e.jsx("strong",{children:"API Key:"})," ",o?"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢":"NÃ£o configurada"]})]})]}),e.jsx("button",{onClick:g,disabled:p||!o||!c,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Testando conexÃ£o..."})]}):"Testar ConexÃ£o"})]});case 5:return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Tudo pronto!"}),e.jsx("p",{className:"text-gray-600",children:"Sua extensÃ£o estÃ¡ configurada e pronta para usar. Agora vocÃª pode automatizar suas tarefas web!"}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"PrÃ³ximos passos:"}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Clique no Ã­cone da extensÃ£o na barra do navegador"}),e.jsx("li",{children:'â€¢ Digite uma instruÃ§Ã£o como "Abra o Gmail"'}),e.jsx("li",{children:"â€¢ Veja a mÃ¡gica acontecer!"})]})]}),e.jsx("button",{onClick:n,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"ComeÃ§ar a usar"})]});default:return null}};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:x.map((y,l)=>e.jsxs("div",{className:`flex items-center ${l<=t?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${l<=t?"bg-blue-600 text-white":"bg-gray-200 text-gray-400"}`,children:l+1}),l<x.length-1&&e.jsx("div",{className:`w-12 h-0.5 mx-2 ${l<t?"bg-blue-600":"bg-gray-200"}`})]},l))}),e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Passo ",t+1," de ",x.length,": ",x[t]]})]}),e.jsx(D,{mode:"wait",children:e.jsx(I.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"min-h-[400px] flex flex-col justify-center",children:S()},t)}),t<x.length-1&&t!==4&&e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs("button",{onClick:C,disabled:t===0,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Anterior"})]}),e.jsxs("button",{onClick:m,disabled:t===1&&!r||t===2&&!o||t===3&&!c,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{children:"PrÃ³ximo"}),e.jsx(ne,{className:"w-4 h-4"})]})]})]})},pe=({steps:n,onComplete:t,onCancel:s})=>{const[r,d]=a.useState(0),[o,i]=a.useState(!1),[c,b]=a.useState(!1),[h,u]=a.useState(new Set),p=async(m,C)=>{try{const[f]=await chrome.tabs.query({active:!0,currentWindow:!0});return await chrome.tabs.sendMessage(f.id,{type:"EXECUTE_STEP",step:m}),u(g=>new Set([...g,C])),await new Promise(g=>setTimeout(g,1e3)),!0}catch(f){return console.error("Erro ao executar passo:",f),!1}},w=async()=>{i(!0),b(!1);for(let m=r;m<n.length&&!c;m++)if(d(m),!await p(n[m],m)){i(!1),alert(`Erro ao executar o passo: ${n[m].description}`);return}i(!1),t()},j=()=>{b(!0),i(!1)},v=()=>{i(!1),b(!1),d(0),u(new Set),s()},x=m=>h.has(m)?e.jsx(R,{className:"w-5 h-5 text-green-500"}):m===r&&o?e.jsx(oe,{className:"w-5 h-5 text-blue-500 animate-pulse"}):e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Executando Tarefa"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[h.size," de ",n.length," passos concluÃ­dos"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${h.size/n.length*100}%`}})}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:n.map((m,C)=>e.jsxs(I.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:C*.1},className:`flex items-center space-x-3 p-3 rounded-lg ${C===r&&o?"bg-blue-50 border border-blue-200":h.has(C)?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[x(C),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:m.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:[m.action," ",m.target&&`â†’ ${m.target}`]})]})]},m.id))}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[!o&&!c&&e.jsxs("button",{onClick:w,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Iniciar"})]}),o&&e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Pausar"})]}),c&&e.jsxs("button",{onClick:w,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Continuar"})]}),e.jsxs("button",{onClick:v,className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"Parar"})]})]})]})};class fe{async makeRequest(t){const s=await V();if(!s.isConfigured)throw new Error("IA nÃ£o configurada. Configure primeiro nas opÃ§Ãµes.");switch(s.selectedProvider){case"openai":return this.callOpenAI(t,s.apiKey,s.selectedModel);case"gemini":return this.callGemini(t,s.apiKey,s.selectedModel);case"ollama":return this.callOllama(t,s.apiKey,s.selectedModel);default:throw new Error("Provedor de IA nÃ£o suportado")}}async callOpenAI(t,s,r){const d=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({model:r||"gpt-3.5-turbo",messages:[{role:"system",content:'VocÃª Ã© um assistente que converte instruÃ§Ãµes em passos de automaÃ§Ã£o web. Responda sempre em JSON com formato: {"steps": [{"action": "navigate|click|type|wait", "target": "seletor ou URL", "value": "texto se necessÃ¡rio", "description": "descriÃ§Ã£o do passo"}], "explanation": "explicaÃ§Ã£o do que serÃ¡ feito", "warnings": ["avisos se houver"]}'},{role:"user",content:t}],temperature:.3})});if(!d.ok){const i=await d.text();throw new Error(`Erro na API OpenAI: ${d.status} - ${i}`)}return(await d.json()).choices[0].message.content}async callGemini(t,s,r){const o=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${r||"gemini-pro"}:generateContent?key=${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`VocÃª Ã© um assistente que converte instruÃ§Ãµes em passos de automaÃ§Ã£o web. Responda sempre em JSON com formato: {"steps": [{"action": "navigate|click|type|wait", "target": "seletor ou URL", "value": "texto se necessÃ¡rio", "description": "descriÃ§Ã£o do passo"}], "explanation": "explicaÃ§Ã£o do que serÃ¡ feito", "warnings": ["avisos se houver"]}

InstruÃ§Ã£o: ${t}`}]}],generationConfig:{temperature:.3,topK:1,topP:1,maxOutputTokens:2048}})});if(!o.ok){const c=await o.text();throw new Error(`Erro na API Gemini: ${o.status} - ${c}`)}const i=await o.json();if(!i.candidates||!i.candidates[0]||!i.candidates[0].content)throw new Error("Resposta invÃ¡lida da API Gemini");return i.candidates[0].content.parts[0].text}async callOllama(t,s,r){const d=await fetch(`${s}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:r||"llama2",prompt:`VocÃª Ã© um assistente que converte instruÃ§Ãµes em passos de automaÃ§Ã£o web. Responda sempre em JSON com formato: {"steps": [{"action": "navigate|click|type|wait", "target": "seletor ou URL", "value": "texto se necessÃ¡rio", "description": "descriÃ§Ã£o do passo"}], "explanation": "explicaÃ§Ã£o do que serÃ¡ feito", "warnings": ["avisos se houver"]}

InstruÃ§Ã£o: ${t}`,stream:!1})});if(!d.ok){const i=await d.text();throw new Error(`Erro no Ollama: ${d.status} - ${i}`)}return(await d.json()).response}async processInstruction(t){try{const s=await this.makeRequest(t);let r=s;const d=s.match(/\{[\s\S]*\}/);d&&(r=d[0]);const o=JSON.parse(r);return{steps:o.steps.map((i,c)=>({id:`step-${c}`,description:i.description,action:i.action,target:i.target,value:i.value,completed:!1})),explanation:o.explanation,warnings:o.warnings||[]}}catch(s){throw console.error("Erro ao processar instruÃ§Ã£o:",s),new Error(`NÃ£o foi possÃ­vel processar a instruÃ§Ã£o: ${s.message}`)}}}const ge=new fe,ye=()=>{const[n,t]=a.useState(null),[s,r]=a.useState(""),[d,o]=a.useState(!1),[i,c]=a.useState(null),[b,h]=a.useState(!1);a.useState("main"),a.useEffect(()=>{u()},[]);const u=async()=>{try{const x=await V();t(x),x.hasCompletedOnboarding||h(!0)}catch(x){console.error("Erro ao carregar configuraÃ§Ãµes:",x)}},p=async()=>{if(!(!s.trim()||d)){o(!0);try{const x=await ge.processInstruction(s);c(x),r("")}catch{alert("Erro ao processar instruÃ§Ã£o. Verifique sua configuraÃ§Ã£o.")}finally{o(!1)}}},w=()=>{c(null)},j=()=>{c(null)},v=()=>{chrome.runtime.openOptionsPage()};return b?e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx(he,{onComplete:()=>{h(!1),u()}})}):n?.isConfigured?e.jsx("div",{className:"h-full flex flex-col bg-white",children:e.jsx(D,{mode:"wait",children:i?e.jsxs(I.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white sticky top-0 z-10",children:[e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Voltar"})]}),e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Executando Tarefa"}),e.jsx("div",{className:"w-16"})," "]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx(pe,{steps:i.steps,onComplete:w,onCancel:j})})]},"task-executor"):e.jsxs(I.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ue,{className:"w-7 h-7 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Assistente IA"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n.selectedProvider," â€¢ ",n.selectedModel]})]})]}),e.jsx("button",{onClick:v,className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(xe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"ðŸ’¡ Exemplos RÃ¡pidos"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:["Abra o Gmail e verifique novos emails","FaÃ§a uma postagem no LinkedIn sobre produtividade","Consulte o clima para hoje no Google","Pesquise por apartamentos para alugar","Abra o YouTube e procure por tutoriais de React"].map((x,m)=>e.jsx("button",{onClick:()=>r(x),className:"text-left text-sm text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 p-3 rounded-lg transition-colors border border-blue-100 hover:border-blue-200",children:x},m))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-800",children:"ðŸŽ¯ O que vocÃª quer que eu faÃ§a?"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:s,onChange:x=>r(x.target.value),placeholder:"Ex: FaÃ§a uma postagem de bom dia no meu LinkedIn",className:"w-full p-4 pr-14 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm",rows:4,onKeyDown:x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),p())}}),e.jsx("button",{onClick:p,disabled:!s.trim()||d,className:"absolute bottom-3 right-3 p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?e.jsx(le,{className:"w-5 h-5 animate-spin"}):e.jsx(de,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-100",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"ðŸ’¡ Dicas para Melhores Resultados"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:"â€¢"}),e.jsx("span",{children:"Seja especÃ­fico sobre o que quer fazer"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:"â€¢"}),e.jsx("span",{children:'Mencione o site se necessÃ¡rio (ex: "no LinkedIn")'})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:"â€¢"}),e.jsx("span",{children:"Use linguagem natural e simples"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:"â€¢"}),e.jsx("span",{children:"Divida tarefas complexas em passos menores"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:"ðŸ“Š Status da ConfiguraÃ§Ã£o"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Provedor:"}),e.jsx("span",{className:"font-medium text-gray-800",children:n.selectedProvider})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Modelo:"}),e.jsx("span",{className:"font-medium text-gray-800",children:n.selectedModel})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:"font-medium text-green-600",children:"âœ“ Configurado"})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:v,className:"inline-flex items-center space-x-2 text-sm text-gray-500 hover:text-gray-700 transition-colors",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:"ConfiguraÃ§Ãµes AvanÃ§adas"})]})})]})]},"main-interface")})}):e.jsx("div",{className:"h-full flex items-center justify-center p-6",children:e.jsxs("div",{className:"text-center space-y-6 max-w-md",children:[e.jsx(z,{className:"w-16 h-16 text-yellow-500 mx-auto"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"ConfiguraÃ§Ã£o NecessÃ¡ria"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure sua IA antes de usar a extensÃ£o"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:v,className:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Abrir ConfiguraÃ§Ãµes"}),e.jsx("button",{onClick:()=>h(!0),className:"w-full bg-gray-100 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Iniciar ConfiguraÃ§Ã£o Guiada"})]})]})})},$=document.getElementById("sidepanel-root");$&&W($).render(e.jsx(ye,{}));
