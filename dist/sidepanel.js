import{r as a,u as T,f as U,a as G,P as B,L as J,c as w,j as e,m as M,A as I,C as R,b as z,E as K,g as _,s as H,d as V,e as W}from"./storage.js";function F(){const n=a.useRef(!1);return T(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function Z(){const n=F(),[t,s]=a.useState(0),r=a.useCallback(()=>{n.current&&s(t+1)},[t]);return[a.useCallback(()=>U.postRender(r),[r]),t]}class X extends a.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=s.offsetHeight||0,r.width=s.offsetWidth||0,r.top=s.offsetTop,r.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Y({children:n,isPresent:t}){const s=a.useId(),r=a.useRef(null),c=a.useRef({width:0,height:0,top:0,left:0});return a.useInsertionEffect(()=>{const{width:o,height:l,top:i,left:b}=c.current;if(t||!r.current||!o||!l)return;r.current.dataset.motionPopId=s;const h=document.createElement("style");return document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${i}px !important;
            left: ${b}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[t]),a.createElement(X,{isPresent:t,childRef:r,sizeRef:c},a.cloneElement(n,{ref:r}))}const A=({children:n,initial:t,isPresent:s,onExitComplete:r,custom:c,presenceAffectsLayout:o,mode:l})=>{const i=G(Q),b=a.useId(),h=a.useMemo(()=>({id:b,initial:t,isPresent:s,custom:c,onExitComplete:u=>{i.set(u,!0);for(const f of i.values())if(!f)return;r&&r()},register:u=>(i.set(u,!1),()=>i.delete(u))}),o?void 0:[s]);return a.useMemo(()=>{i.forEach((u,f)=>i.set(f,!1))},[s]),a.useEffect(()=>{!s&&!i.size&&r&&r()},[s]),l==="popLayout"&&(n=a.createElement(Y,{isPresent:s},n)),a.createElement(B.Provider,{value:h},n)};function Q(){return new Map}function ee(n){return a.useEffect(()=>()=>n(),[])}const S=n=>n.key||"";function se(n,t){n.forEach(s=>{const r=S(s);t.set(r,s)})}function te(n){const t=[];return a.Children.forEach(n,s=>{a.isValidElement(s)&&t.push(s)}),t}const D=({children:n,custom:t,initial:s=!0,onExitComplete:r,exitBeforeEnter:c,presenceAffectsLayout:o=!0,mode:l="sync"})=>{const i=a.useContext(J).forceRender||Z()[0],b=F(),h=te(n);let u=h;const f=a.useRef(new Map).current,C=a.useRef(u),j=a.useRef(new Map).current,N=a.useRef(!0);if(T(()=>{N.current=!1,se(h,j),C.current=u}),ee(()=>{N.current=!0,j.clear(),f.clear()}),N.current)return a.createElement(a.Fragment,null,u.map(g=>a.createElement(A,{key:S(g),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:o,mode:l},g)));u=[...u];const d=C.current.map(S),m=h.map(S),k=d.length;for(let g=0;g<k;g++){const y=d[g];m.indexOf(y)===-1&&!f.has(y)&&f.set(y,void 0)}return l==="wait"&&f.size&&(u=[]),f.forEach((g,y)=>{if(m.indexOf(y)!==-1)return;const E=j.get(y);if(!E)return;const v=d.indexOf(y);let x=g;if(!x){const p=()=>{f.delete(y);const q=Array.from(j.keys()).filter(P=>!m.includes(P));if(q.forEach(P=>j.delete(P)),C.current=h.filter(P=>{const L=S(P);return L===y||q.includes(L)}),!f.size){if(b.current===!1)return;i(),r&&r()}};x=a.createElement(A,{key:S(E),isPresent:!1,onExitComplete:p,custom:t,presenceAffectsLayout:o,mode:l},E),f.set(y,x)}u.splice(v,0,x)}),u=u.map(g=>{const y=g.key;return f.has(y)?g:a.createElement(A,{key:S(g),isPresent:!0,presenceAffectsLayout:o,mode:l},g)}),a.createElement(a.Fragment,null,f.size?u:u.map(g=>a.cloneElement(g)))},ae=w("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),re=w("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ne=w("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),oe=w("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),le=w("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),ie=w("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),O=w("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),ce=w("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),de=w("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),xe=w("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ue=w("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),me=w("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),he=({onComplete:n})=>{const[t,s]=a.useState(0),[r,c]=a.useState(""),[o,l]=a.useState(""),[i,b]=a.useState(""),[h,u]=a.useState([]),[f,C]=a.useState(!1),[j,N]=a.useState(!1),d=["Bem-vindo","Escolha sua IA","Configure a chave","Escolha o modelo","Teste a conex√£o","Pronto!"],m=()=>{t<d.length-1&&s(t+1)},k=()=>{t>0&&s(t-1)},g=async()=>{if(!(!o||!r)){N(!0);try{const v=await _(r,o);u(v),v.length>0&&!i&&b(v[0])}catch(v){console.error("Erro ao carregar modelos:",v);const x=I.find(p=>p.id===r);x&&(u(x.defaultModels),b(x.defaultModels[0]))}finally{N(!1)}}},y=async()=>{C(!0);try{await new Promise(v=>setTimeout(v,2e3)),await H({selectedProvider:r,apiKey:o,selectedModel:i,isConfigured:!0,hasCompletedOnboarding:!0}),m()}catch{alert("Erro ao testar conex√£o. Verifique sua chave de API.")}finally{C(!1)}},E=()=>{var v;switch(t){case 0:return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ü§ñ"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Bem-vindo ao Assistente IA Web!"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Automatize tarefas repetitivas na web com intelig√™ncia artificial. Vou te ajudar a configurar tudo em poucos passos simples."}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"O que voc√™ pode fazer:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:'‚Ä¢ "Fa√ßa uma postagem de bom dia no LinkedIn"'}),e.jsx("li",{children:'‚Ä¢ "Consulte pre√ßos de passagem para S√£o Paulo"'}),e.jsx("li",{children:'‚Ä¢ "Bata meu ponto no sistema da empresa"'}),e.jsx("li",{children:"‚Ä¢ E muito mais!"})]})]})]});case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Escolha seu Provedor de IA"}),e.jsx("p",{className:"text-gray-600",children:"Selecione qual intelig√™ncia artificial voc√™ quer usar"})]}),e.jsx("div",{className:"space-y-3",children:I.map(p=>e.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${r===p.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>c(p.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-2xl",children:p.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:p.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:p.description}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:p.costInfo})]}),r===p.id&&e.jsx(R,{className:"w-5 h-5 text-blue-500"})]})},p.id))})]});case 2:const x=I.find(p=>p.id===r);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Configure sua Chave de API"}),e.jsxs("p",{className:"text-gray-600",children:["Voc√™ precisa de uma chave para usar ",x==null?void 0:x.name]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(z,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-800",children:"Como obter sua chave:"}),e.jsxs("ol",{className:"text-sm text-yellow-700 mt-2 space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"Clique no link abaixo para abrir o site oficial"}),e.jsx("li",{children:"Crie uma conta ou fa√ßa login"}),e.jsx("li",{children:'Procure por "API Keys" ou "Chaves de API"'}),e.jsx("li",{children:"Crie uma nova chave e copie ela"}),e.jsx("li",{children:"Cole a chave no campo abaixo"})]})]})]})}),e.jsxs("a",{href:x==null?void 0:x.setupUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsxs("span",{children:["Abrir ",x==null?void 0:x.name]}),e.jsx(K,{className:"w-4 h-4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:x==null?void 0:x.apiKeyLabel}),e.jsx("input",{type:"password",value:o,onChange:p=>l(p.target.value),placeholder:"Cole sua chave de API aqui...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Escolha o Modelo de IA"}),e.jsx("p",{className:"text-gray-600",children:"Selecione qual modelo voc√™ quer usar"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{onClick:g,disabled:!o||j,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Carregando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:"Carregar Modelos"})]})})}),h.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Modelos Dispon√≠veis:"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:h.map(p=>e.jsx("div",{className:`p-3 border-2 rounded-lg cursor-pointer transition-all ${i===p?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>b(p),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-800",children:p}),i===p&&e.jsx(R,{className:"w-5 h-5 text-blue-500"})]})},p))})]}),h.length===0&&!j&&e.jsx("div",{className:"text-center text-gray-500",children:'Clique em "Carregar Modelos" para ver os modelos dispon√≠veis'})]});case 4:return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Vamos testar sua configura√ß√£o"}),e.jsx("p",{className:"text-gray-600",children:"Clique no bot√£o abaixo para verificar se tudo est√° funcionando"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Configura√ß√£o Atual:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Provedor:"})," ",(v=I.find(p=>p.id===r))==null?void 0:v.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Modelo:"})," ",i]}),e.jsxs("p",{children:[e.jsx("strong",{children:"API Key:"})," ",o?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢":"N√£o configurada"]})]})]}),e.jsx("button",{onClick:y,disabled:f||!o||!i,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Testando conex√£o..."})]}):"Testar Conex√£o"})]});case 5:return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üéâ"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Tudo pronto!"}),e.jsx("p",{className:"text-gray-600",children:"Sua extens√£o est√° configurada e pronta para usar. Agora voc√™ pode automatizar suas tarefas web!"}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Pr√≥ximos passos:"}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Clique no √≠cone da extens√£o na barra do navegador"}),e.jsx("li",{children:'‚Ä¢ Digite uma instru√ß√£o como "Abra o Gmail"'}),e.jsx("li",{children:"‚Ä¢ Veja a m√°gica acontecer!"})]})]}),e.jsx("button",{onClick:n,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Come√ßar a usar"})]});default:return null}};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:d.map((v,x)=>e.jsxs("div",{className:`flex items-center ${x<=t?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${x<=t?"bg-blue-600 text-white":"bg-gray-200 text-gray-400"}`,children:x+1}),x<d.length-1&&e.jsx("div",{className:`w-12 h-0.5 mx-2 ${x<t?"bg-blue-600":"bg-gray-200"}`})]},x))}),e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Passo ",t+1," de ",d.length,": ",d[t]]})]}),e.jsx(D,{mode:"wait",children:e.jsx(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"min-h-[400px] flex flex-col justify-center",children:E()},t)}),t<d.length-1&&t!==4&&e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs("button",{onClick:k,disabled:t===0,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Anterior"})]}),e.jsxs("button",{onClick:m,disabled:t===1&&!r||t===2&&!o||t===3&&!i,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{children:"Pr√≥ximo"}),e.jsx(ne,{className:"w-4 h-4"})]})]})]})},pe=({steps:n,onComplete:t,onCancel:s})=>{const[r,c]=a.useState(0),[o,l]=a.useState(!1),[i,b]=a.useState(!1),[h,u]=a.useState(new Set),f=async(m,k)=>{try{const[g]=await chrome.tabs.query({active:!0,currentWindow:!0});return await chrome.tabs.sendMessage(g.id,{type:"EXECUTE_STEP",step:m}),u(y=>new Set([...y,k])),await new Promise(y=>setTimeout(y,1e3)),!0}catch(g){return console.error("Erro ao executar passo:",g),!1}},C=async()=>{l(!0),b(!1);for(let m=r;m<n.length&&!i;m++)if(c(m),!await f(n[m],m)){l(!1),alert(`Erro ao executar o passo: ${n[m].description}`);return}l(!1),t()},j=()=>{b(!0),l(!1)},N=()=>{l(!1),b(!1),c(0),u(new Set),s()},d=m=>h.has(m)?e.jsx(R,{className:"w-5 h-5 text-green-500"}):m===r&&o?e.jsx(oe,{className:"w-5 h-5 text-blue-500 animate-pulse"}):e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Executando Tarefa"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[h.size," de ",n.length," passos conclu√≠dos"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${h.size/n.length*100}%`}})}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:n.map((m,k)=>e.jsxs(M.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:k*.1},className:`flex items-center space-x-3 p-3 rounded-lg ${k===r&&o?"bg-blue-50 border border-blue-200":h.has(k)?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[d(k),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:m.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:[m.action," ",m.target&&`‚Üí ${m.target}`]})]})]},m.id))}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[!o&&!i&&e.jsxs("button",{onClick:C,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Iniciar"})]}),o&&e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Pausar"})]}),i&&e.jsxs("button",{onClick:C,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Continuar"})]}),e.jsxs("button",{onClick:N,className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"Parar"})]})]})]})};class fe{async makeRequest(t){const s=await V();if(!s.isConfigured)throw new Error("IA n√£o configurada. Configure primeiro nas op√ß√µes.");switch(s.selectedProvider){case"openai":return this.callOpenAI(t,s.apiKey,s.selectedModel);case"gemini":return this.callGemini(t,s.apiKey,s.selectedModel);case"ollama":return this.callOllama(t,s.apiKey,s.selectedModel);default:throw new Error("Provedor de IA n√£o suportado")}}async callOpenAI(t,s,r){const c=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({model:r||"gpt-3.5-turbo",messages:[{role:"system",content:'Voc√™ √© um assistente que converte instru√ß√µes em passos de automa√ß√£o web. Responda sempre em JSON com formato: {"steps": [{"action": "navigate|click|type|wait", "target": "seletor ou URL", "value": "texto se necess√°rio", "description": "descri√ß√£o do passo"}], "explanation": "explica√ß√£o do que ser√° feito", "warnings": ["avisos se houver"]}'},{role:"user",content:t}],temperature:.3})});if(!c.ok){const l=await c.text();throw new Error(`Erro na API OpenAI: ${c.status} - ${l}`)}return(await c.json()).choices[0].message.content}async callGemini(t,s,r){const o=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${r||"gemini-pro"}:generateContent?key=${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`Voc√™ √© um assistente que converte instru√ß√µes em passos de automa√ß√£o web. Responda sempre em JSON com formato: {"steps": [{"action": "navigate|click|type|wait", "target": "seletor ou URL", "value": "texto se necess√°rio", "description": "descri√ß√£o do passo"}], "explanation": "explica√ß√£o do que ser√° feito", "warnings": ["avisos se houver"]}

Instru√ß√£o: ${t}`}]}],generationConfig:{temperature:.3,topK:1,topP:1,maxOutputTokens:2048}})});if(!o.ok){const i=await o.text();throw new Error(`Erro na API Gemini: ${o.status} - ${i}`)}const l=await o.json();if(!l.candidates||!l.candidates[0]||!l.candidates[0].content)throw new Error("Resposta inv√°lida da API Gemini");return l.candidates[0].content.parts[0].text}async callOllama(t,s,r){const c=await fetch(`${s}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:r||"llama2",prompt:`Voc√™ √© um assistente que converte instru√ß√µes em passos de automa√ß√£o web. Responda sempre em JSON com formato: {"steps": [{"action": "navigate|click|type|wait", "target": "seletor ou URL", "value": "texto se necess√°rio", "description": "descri√ß√£o do passo"}], "explanation": "explica√ß√£o do que ser√° feito", "warnings": ["avisos se houver"]}

Instru√ß√£o: ${t}`,stream:!1})});if(!c.ok){const l=await c.text();throw new Error(`Erro no Ollama: ${c.status} - ${l}`)}return(await c.json()).response}async processInstruction(t){try{const s=await this.makeRequest(t);let r=s;const c=s.match(/\{[\s\S]*\}/);c&&(r=c[0]);const o=JSON.parse(r);return{steps:o.steps.map((l,i)=>({id:`step-${i}`,description:l.description,action:l.action,target:l.target,value:l.value,completed:!1})),explanation:o.explanation,warnings:o.warnings||[]}}catch(s){throw console.error("Erro ao processar instru√ß√£o:",s),new Error(`N√£o foi poss√≠vel processar a instru√ß√£o: ${s.message}`)}}}const ge=new fe,ye=()=>{const[n,t]=a.useState(null),[s,r]=a.useState(""),[c,o]=a.useState(!1),[l,i]=a.useState(null),[b,h]=a.useState(!1);a.useState("main"),a.useEffect(()=>{u()},[]);const u=async()=>{try{const d=await V();t(d),d.hasCompletedOnboarding||h(!0)}catch(d){console.error("Erro ao carregar configura√ß√µes:",d)}},f=async()=>{if(!(!s.trim()||c)){o(!0);try{const d=await ge.processInstruction(s);i(d),r("")}catch{alert("Erro ao processar instru√ß√£o. Verifique sua configura√ß√£o.")}finally{o(!1)}}},C=()=>{i(null)},j=()=>{i(null)},N=()=>{chrome.runtime.openOptionsPage()};return b?e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx(he,{onComplete:()=>{h(!1),u()}})}):n!=null&&n.isConfigured?e.jsx("div",{className:"h-full flex flex-col bg-white",children:e.jsx(D,{mode:"wait",children:l?e.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white sticky top-0 z-10",children:[e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Voltar"})]}),e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Executando Tarefa"}),e.jsx("div",{className:"w-16"})," "]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx(pe,{steps:l.steps,onComplete:C,onCancel:j})})]},"task-executor"):e.jsxs(M.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ue,{className:"w-7 h-7 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Assistente IA"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n.selectedProvider," ‚Ä¢ ",n.selectedModel]})]})]}),e.jsx("button",{onClick:N,className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(xe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"üí° Exemplos R√°pidos"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:["Abra o Gmail e verifique novos emails","Fa√ßa uma postagem no LinkedIn sobre produtividade","Consulte o clima para hoje no Google","Pesquise por apartamentos para alugar","Abra o YouTube e procure por tutoriais de React"].map((d,m)=>e.jsx("button",{onClick:()=>r(d),className:"text-left text-sm text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 p-3 rounded-lg transition-colors border border-blue-100 hover:border-blue-200",children:d},m))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-800",children:"üéØ O que voc√™ quer que eu fa√ßa?"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:s,onChange:d=>r(d.target.value),placeholder:"Ex: Fa√ßa uma postagem de bom dia no meu LinkedIn",className:"w-full p-4 pr-14 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm",rows:4,onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),f())}}),e.jsx("button",{onClick:f,disabled:!s.trim()||c,className:"absolute bottom-3 right-3 p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?e.jsx(le,{className:"w-5 h-5 animate-spin"}):e.jsx(de,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-100",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"üí° Dicas para Melhores Resultados"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:"‚Ä¢"}),e.jsx("span",{children:"Seja espec√≠fico sobre o que quer fazer"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:"‚Ä¢"}),e.jsx("span",{children:'Mencione o site se necess√°rio (ex: "no LinkedIn")'})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:"‚Ä¢"}),e.jsx("span",{children:"Use linguagem natural e simples"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:"‚Ä¢"}),e.jsx("span",{children:"Divida tarefas complexas em passos menores"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:"üìä Status da Configura√ß√£o"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Provedor:"}),e.jsx("span",{className:"font-medium text-gray-800",children:n.selectedProvider})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Modelo:"}),e.jsx("span",{className:"font-medium text-gray-800",children:n.selectedModel})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:"font-medium text-green-600",children:"‚úì Configurado"})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:N,className:"inline-flex items-center space-x-2 text-sm text-gray-500 hover:text-gray-700 transition-colors",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:"Configura√ß√µes Avan√ßadas"})]})})]})]},"main-interface")})}):e.jsx("div",{className:"h-full flex items-center justify-center p-6",children:e.jsxs("div",{className:"text-center space-y-6 max-w-md",children:[e.jsx(z,{className:"w-16 h-16 text-yellow-500 mx-auto"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Configura√ß√£o Necess√°ria"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure sua IA antes de usar a extens√£o"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:N,className:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Abrir Configura√ß√µes"}),e.jsx("button",{onClick:()=>h(!0),className:"w-full bg-gray-100 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Iniciar Configura√ß√£o Guiada"})]})]})})},$=document.getElementById("sidepanel-root");$&&W($).render(e.jsx(ye,{}));
